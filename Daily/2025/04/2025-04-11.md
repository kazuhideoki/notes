# 2025-04-11

[[2025-04-10]] [[2025-04-12]]

## 本日のタスク

- [ ] MCP布教、聞き取り
	- [ ] CS(天野さんも)
	- [x] デザイナー
- [ ] CS業務効率化ミーティング（夕方） [[cs_operation_efficiency]]
- [ ] AI 関連確認
	- [ ] ChatGPT Pro
	- [ ] Sonnet -> Gemini試す
	- [ ] Devin が従量課金？沖支払いになっている？
- [ ] [[CS業務効率化アイデア]] の準備
- [ ] 吉野さんの目標更新レビュー、1on1MTのための準備 [[2025-04-11_1on1_yoshino]]

- [ ] レビュー
  - [ ] PDM_S-1797 繰り返し予約を一括削除する（実装） https://github.com/yourStand/yourstand-business/pull/38 [[PDM_S-1797]]
  - [ ] 安田さん
		- [ ] https://github.com/yourStand/yourstand-business/pull/40
		- [ ] https://github.com/yourStand/ocpp-simulator/pull/12
- [ ] ドキュメントの充実化 https://yourstand.backlog.com/view/PDM_S-1843 [[PDM_S-1843]]
- [ ] Claude Codeで並行操作 git wordktrees https://docs.anthropic.com/en/docs/agents-and-tools/claude-code/tutorials#run-parallel-claude-code-sessions-with-git-worktrees

- [ ] 天野さんに現場作業付いていくの聞いてみる
- [ ] stt
	- [ ] マイクを定期キャッシュする。それを保存して使う

## 明日のタスク

- [ ] うらさん専用の MCP Server にする
- [ ] 昨日の音声入力設計別ファイル化

## 積み上げタスク

- [ ] [[Claude Code スラッシュコマンド案]]
	- [ ] merge 済みローカルブランチの削除
- [ ] [[圏論アイデア]]

## 音声認識改善

### ザックリ方向性

- 状態遷移をポーリングで早く回す → 速くなるか？、原因は何？
	- ポーリングのラグ、ffmpegの起動ラグ、リクエスト/レスポンスのラグ
- 文脈付与機能を実装する
	- Raycastあぷりで、選択部分取得か？
- ロジック改善案考える
- Rustで書きかえる

### アイデア

- 選択部分を取り込みコンテキストに含める
- 1つづつの録音と文字起こしをサイクルを待たずに、録音+文字起こしを連続してリクエストする
	- 明示的に終了させる前は、部分的に開始終了をコマンド入力しながら進める。途中結果もリクエスト時コンテキストに含める
	- 明示的に終了させた時に最終結果を受け取る
- 途中結果をRaycast 拡張で表示させていく。

### 検証

- コンテキストを付与すると、文字起こし性能が上がるか？
- npmライブラリで良いものは？
	- デバイスを優先順位つけて選択可能か？
- サーバークライアントwebsocketで連続的メッセージ送れるか

### 設計

- サーバー Hono + Node or Rust
	- 利用可能デバイスの更新ジョブ（npmライブラリだとこれどうなる？）
	- 録画開始エンドポイント
	- 結果取得エンドポイント（1. ポーリング、2 websocketで開始エンドポイントに含める）
	- 録音はnpmライブラリで。
- DB SQLite
	- 利用可能デバイス名
	- 録音情報
	- 文字起こし結果
- ストレージ ファイルシステム
	- 録音データ
- クライアント（Raycast 拡張）
	- 録音開始リクエストの送信
	- 録音結果の取得
	- 選択部分をコンテキストとして送る

### 設計案2

- フロントエンド スクリプト
	- websocketで繋ぎ、開始リクエストする
	- コマンド監視、終了リクエスト
	- 選択コンテキストを送信できないか→ 何かしらの監視でできたりする？
- サーバー
	- websocketエンドポイント用意、録音開始を待ち受ける
	- 終了コマンドを受け取ったら停止してsttリクエスト、結果を返すorクリップボード
	- 利用可能デバイス監視ジョブやる
- データは録音ファイルの一時保存でも十分か

### 比較

- TypeScript（Raycast拡張）
	- 作るのが早い
	- コンテキストはフロントで取得
- Rust （Bashスクリプト）
	- 外部依存がない（soxとか使わずにできる）
	- コンテキストはサーバーで取得
